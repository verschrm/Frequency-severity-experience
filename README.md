# Frequency-Severity Experience Rating based on Latent Markovian Risk Profiles
### Author: <a href="https://www.uva.nl/profile/r.m.verschuren" target="_blank">Robert Matthijs Verschuren</a> </br> Institution: Amsterdam School of Economics, University of Amsterdam
Bonus-Malus Systems traditionally consider a customer’s number of claims irrespective of their size, even though these components are dependent in practice. We propose a novel joint experience rating approach based on latent Markovian risk profiles to allow for a positive or negative individual frequency-severity dependence. The latent profiles evolve over time in a Hidden Markov Model to capture updates in a customer’s claims experience with conditionally independent claim counts and sizes. We show that the resulting risk premia represent a dynamic, claims experience-weighted mixture of standard credibility premia. The proposed approach is applied to a Dutch automobile insurance portfolio and identifies customer risk profiles with distinctive claiming behavior. These profiles, in turn, enable us to better distinguish between customer risks.

The Bayesian Hidden Markov Models proposed in this paper are applied to a confidential automobile insurance portfolio from a large Dutch insurer. This portfolio consists of Motor Third Party Liability (MTPL) insurance policies from 2011 up to and including 2019 and contains data on the level of individual policyholders. It involves 193,744 policies with a total exposure to risk of 108,088 years and 5,662 claims ranging from €4.39 to €569,584.57. Furthermore, each policyholder has insured only one vehicle and the portfolio includes various customer- and vehicle-specific risk characteristics that are commonly adopted for pricing in the Dutch insurance market. For more details on the exact risk factors used in this application, we refer the reader to the corresponding paper.

The relevant R code for performing the proposed joint, frequency-severity experience rating approach is provided in the Zip file `R_Code_Paper_Verschuren_R_M_2022.zip`. To begin with, the necessary preprocessing of the MTPL portfolio is performed in the file `MTPL_Preprocessing.R`, as well as the robustness checks of the Generalized Beta of the second kind (GB2) distribution with respect to large claims. After these preprocessing steps, the Bayesian Hidden Markov Models are estimated in the file `MTPL_Bayesian_HMM_Z.R` in the folder "Z" under a full model representation (Z = Full) and a sparse model representation (Z = Sparse). The estimation procedure relies on an Empirical Bayes version of the Baum-Welch algorithm, provided in the file `EB_BW_BFGS_Z.R` in the folder "Z\Functions" for Z = {Full, Sparse}. These Baum-Welch algorithms, in turn, depend on the functions {Q_N_j_Full, g_N_j_Full, H_N_j_Full} and {Q_X_j_Full, g_X_j_Full, H_X_j_Full} or {Q_N_Sparse, g_N_Sparse, H_N_Sparse} and {Q_X_Sparse, g_X_Sparse, H_X_Sparse} in the same folder to evaluate the log-likelihood function, gradient vector, and Hessian matrix of the claim counts and sizes in the full or sparse model representation, respectively. Finally, the performance and predictions of the estimated models are analyzed in the file `MTPL_Output_Z` for Z = {Full, Sparse}, which partially rely on the functions in the folder "Common_functions". For more details on the theoretical and empirical findings, we refer the reader to the [paper of Verschuren, R. M. in Insurance: Mathematics and Economics](https://arxiv.org/abs/2109.01413).
